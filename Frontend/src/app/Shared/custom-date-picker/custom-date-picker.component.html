<div class="cdp-root" tabindex="-1" [class.cdp-open]="isOpen">
  <div class="cdp-input-wrap">
    <input #inputRef type="text" class="cdp-input" [placeholder]="getPlaceholder()" [formControl]="inputControl"
      [attr.aria-label]="language === 'de' ? 'Datum auswählen' : 'Pick a date'" (focus)="openPopup()"
      (click)="openPopup()" autocomplete="off" />
    <span class="cdp-calendar-icon" role="button" tabindex="0" aria-label="Open calendar"
      (click)="togglePopup()">&#128197;</span>
  </div>
  <div *ngIf="errorMsg" class="cdp-error" aria-live="polite">{{ errorMsg }}</div>
  <div #popupRef class="cdp-popup" *ngIf="isOpen" [attr.aria-modal]="true" role="dialog">
    <div class="cdp-popup-header">
      <button class="cdp-nav" aria-label="Previous month" (click)="prevMonth()">&lt;</button>
      <select [ngModel]="viewMonth" (ngModelChange)="changeMonth($event)">
        <option *ngFor="let m of months; let i = index; trackBy: trackByMonthIndex" [value]="i">{{ m }}</option>
      </select>
      <select [ngModel]="viewYear" (ngModelChange)="changeYear($event)">
        <option *ngFor="let y of years; trackBy: trackByYear" [value]="y">{{ y }}</option>
      </select>
      <button class="cdp-nav" aria-label="Next month" (click)="nextMonth()">&gt;</button>
    </div>
    <div class="cdp-days-row">
      <span *ngFor="let d of days" class="cdp-day-label">{{ d }}</span>
    </div>
    <div class="cdp-weeks">
      <div *ngFor="let week of calendarWeeks; trackBy: trackByWeekIndex" class="cdp-week">
        <span *ngFor="let cell of week; trackBy: trackByDayDate" class="cdp-day-cell" 
          [class.today]="cell.isToday"
          [class.selected]="cell.isSelected" 
          [class.in-range]="cell.isInRange" 
          [class.disabled]="cell.disabled"
          [class.other-month]="cell.isOtherMonth"
          tabindex="0" (click)="selectDateCell(cell)">
          {{ cell.label }}
        </span>
      </div>
    </div>
    <div *ngIf="showTimePicker && !enableDateRangeSelection" class="cdp-timepicker">
      <input type="number" min="0" max="23" [(ngModel)]="hours" (change)="onTimeChange()" aria-label="Hours" /> :
      <input type="number" min="0" max="59" [(ngModel)]="minutes" (change)="onTimeChange()" aria-label="Minutes" />
    </div>
    <div class="cdp-footer">
      <button type="button" class="cdp-link" (click)="setToday()">{{ language === 'de' ? 'Heute' : 'Today' }}</button>
      <button type="button" class="cdp-link" (click)="clearValue()">{{ language === 'de' ? 'Löschen' : 'Clear'
        }}</button>
    </div>
  </div>
</div>